---
title: NotificationChannelsAndAds
date: 2020-07-12 20:45:38
tags:
---
# Notification Channels 和广告推送

我不知道产品经理们是怎么处理自己手机上的一大坨通知栏信息的。
<!--more-->

最近我把主力机升级到了 Android 11 DP 1 版本，（又）遇到了 Bug。

键盘无法弹出，除了可以看看消息，其他地方和板砖并没什么太大区别了。

BTW，今天升级了 DP 2，键盘恢复了，但是体验上巨卡。

回到主题，因为主力机不能用了，于是我开始渐渐的用起了测试机。

测试机上没有装 Brevent，没有装冰箱，还是个华为，有官方 Push SDK 给这些 App 提供方便的推送通道。于是我的通知栏💥️了。一天天的都是广告。

糟心。

幸好我是个 Dev。

之前适配 Android Oreo 的时候，有注意到官方提供了 Notification Channel 机制，可以让用户选择关闭一部分的通知。比如像支付宝的喂鸡浇树这种就应该屏蔽掉，而动帐发货这类型的消息就应该留下。可是我感觉 Google 把这个功能隐藏的太深了。

之前 Pixel 上的操作是这样的，十分不常用的 App，我就冻结处理。常用的 App 给我推广告，长按广告的那条通知，跳到通知的设置页面，就会自动滚动到这条通知归属的 Channel，并且高亮+闪动区别提示，此时我关掉这个可恶的通道就好了。

但是华为没有这个功能。准确的说是最近更新系统之前没有这个功能。

通过 NotificationListener 还是可以可以揪出来对应的 NotificationChannel 信息的，但是目前能获取到的只有 NotificationChannelId，而在用户界面感知到的是 NotificationChannelName，还是不太容易做关联。

就在我实现了获取 NotificationChannelId 的代码的时候，我收到了一个系统更新，升级完成后，华为上终于也可以揪出来发广告的是那个 Channel 啦。

一通禁用之后，通知栏终于清爽了。

如果没收到这个系统更新，我可能还会继续搞一个黑名单关键词和黑名单 ChannelId 来着，遇到符合条件的通知，就自动清理掉。既然系统已经做了标记的事情，那可就省了老多的时间了。

怎么说呢，通知栏感觉已经是个破窗了，谁都来扔一个石头，最终导致没有人再关注通知栏的消息。涸泽而渔，哪个行业也躲不过。

附操作图一张：

![How](usage.gif)
